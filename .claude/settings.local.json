{
  "permissions": {
    "allow": [
      "Bash(npm run build:*)",
      "Bash(vercel --prod:*)",
      "Bash(git add:*)",
      "Bash(git push:*)",
      "Bash(git show:*)",
      "Bash(git checkout:*)",
      "Bash(git commit:*)",
      "Bash(npm install:*)",
      "Bash(npx prisma:*)",
      "Bash(DRY_RUN=true npx tsx:*)",
      "Bash(npx tsx:*)",
      "Bash(ls:*)",
      "Bash(awk:*)",
      "Bash(lsof:*)",
      "Bash(npm run dev)",
      "Bash(netstat:*)",
      "Bash(findstr:*)",
      "Bash(curl:*)",
      "Bash(vercel --version:*)",
      "Bash(tree:*)",
      "Bash(grep:*)",
      "Bash(while read user)",
      "Bash(do grep -q \"  ''$user'':\" app/comunidades/[slug]/page.tsx)",
      "Bash(echo:*)",
      "Bash(done)",
      "Bash(test:*)",
      "Bash(find:*)",
      "Bash(npx tsc:*)",
      "Bash(npx:*)",
      "Bash(for file in *.ts)",
      "Bash(do sed -i 's/\\\\\\\\`/`/g' \"$file\")",
      "Bash(do sed -i 's/^`//g' \"$file\")",
      "Bash(git -C \"D:\\\\NUTRIFITCOACH_MASTER\\\\nfc-comunidades\" checkout -- backend/src/modules/cache/*.ts)",
      "Bash(npx ts-node:*)",
      "Bash(npm run avatar:analyze:*)",
      "Bash(npm run seed:arenas-biometria:*)",
      "Bash(ping:*)",
      "Bash(start https://supabase.com/dashboard/project/qducbqhuwqdyqioqevle/settings/database)",
      "Bash(Test-NetConnection -ComputerName db.qducbqhuwqdyqioqevle.supabase.co -Port 5432)",
      "Bash(nslookup:*)",
      "Bash(timeout 5 bash -c \"echo > /dev/tcp/db.qducbqhuwqdyqioqevle.supabase.co/5432\")",
      "Bash(docker:*)",
      "Bash(npm run seed:pricing:*)",
      "Bash(npm run seed:test:*)",
      "Bash(AUTO_CONFIRM=true npm run avatar:fix:*)",
      "Bash(npm run:*)",
      "Bash(start https://supabase.com/dashboard/project/qducbqhuwqdyqioqevle/editor/sql)",
      "Bash(dir:*)",
      "Bash(start https://vercel.com/rodrigos-projects-2fb5b2ab/nfc-comunidades/deployments)",
      "Bash(for file in \"FPBalance.tsx\" \"ImageUploader.tsx\" \"PaywallModal.tsx\" \"ProcessingModal.tsx\" \"AnalysisResult.tsx\")",
      "Bash(do)",
      "Bash(if [ -f \"D:\\\\NUTRIFITCOACH_MASTER\\\\nfc-comunidades\\\\components\\\\biometric$file\" ])",
      "Bash(then)",
      "Bash(else)",
      "Bash(fi)",
      "Bash(clip:*)",
      "Bash(Get-Content CORRIGIR_CONTADORES_FALSOS.sql)",
      "Bash(Set-Clipboard)",
      "Bash(kill-port.bat << 'EOF'\n@echo off\nfor /f \"tokens=5\" %%a in \\('netstat -ano ^| findstr :3001'\\) do taskkill /PID %%a /F\ntimeout /t 2\nEOF)",
      "Bash(PORT=3000 npm run dev:*)",
      "Bash(gh api:*)",
      "Bash(git reset:*)",
      "Bash(git diff:*)",
      "Bash(python -m json.tool:*)",
      "Bash(node -e:*)",
      "Bash(\"D:\\\\NUTRIFITCOACH_MASTER\\\\nfc-comunidades\\\\_tmp_query.js\" << 'ENDOFSCRIPT'\nconst { PrismaClient } = require\\('./lib/generated/prisma'\\);\nconst p = new PrismaClient\\(\\);\np.arena.findMany\\({\n  where: { isActive: true },\n  select: { slug: true, name: true, categoria: true },\n  orderBy: { slug: 'asc' }\n}\\).then\\(a => {\n  a.forEach\\(x => console.log\\(x.slug + ' | ' + x.categoria + ' | ' + x.name\\)\\);\n  p.$disconnect\\(\\);\n}\\).catch\\(e => {\n  console.error\\(e\\);\n  p.$disconnect\\(\\);\n}\\);\nENDOFSCRIPT)",
      "Bash(node:*)",
      "Bash(set DATABASE_URL=postgresql://postgres:Anilha15%%21@db.qducbqhuwqdyqioqevle.supabase.co:5432/postgres)",
      "WebFetch(domain:chat.nutrifitcoach.com.br)",
      "Bash(powershell -Command \"Test-NetConnection -ComputerName db.qducbqhuwqdyqioqevle.supabase.co -Port 5432\")",
      "Bash(powershell:*)",
      "Bash(python -c:*)",
      "Bash(git status:*)",
      "Bash(PGPASSWORD=postgres_local_2026 psql:*)",
      "Bash(taskkill:*)",
      "Bash(export DATABASE_URL=\"postgresql://postgres:postgres@localhost:5432/nutrifitcoach\")",
      "Bash(export DIRECT_URL=\"postgresql://postgres:postgres@localhost:5432/nutrifitcoach\")",
      "Bash(docker-compose up:*)",
      "Bash(docker-compose stop:*)",
      "Bash(git rm:*)",
      "Bash(/tmp/fix-arena-counts.mjs:*)",
      "Bash(/tmp/test-updated.js << 'EOF'\nconst https = require\\('https'\\);\nconst url = 'https://chat.nutrifitcoach.com.br/api/arenas?flush=true';\n\nhttps.get\\(url, \\(res\\) => {\n  let data = '';\n  res.on\\('data', chunk => data += chunk\\);\n  res.on\\('end', \\(\\) => {\n    try {\n      const arenas = JSON.parse\\(data\\);\n      const filtered = arenas.filter\\(a => \n        a.slug.includes\\('lipedema'\\) || a.slug.includes\\('vermelho'\\)\n      \\);\n      console.log\\('‚úÖ RESULTADO FINAL:\\\\n'\\);\n      filtered.forEach\\(a => {\n        if \\(a.postsCount > 0\\) {\n          console.log\\(`üìå ${a.name}`\\);\n          console.log\\(`   Slug: ${a.slug}`\\);\n          console.log\\(`   Posts: ${a.postsCount}\\\\n`\\);\n        }\n      }\\);\n    } catch \\(e\\) {\n      console.log\\('Erro:', e.message\\);\n    }\n  }\\);\n}\\).on\\('error', e => console.log\\('Erro:', e.message\\)\\);\nEOF)",
      "Bash(/tmp/sync-posts-to-docker.mjs << 'EOF'\nimport { createClient } from '@supabase/supabase-js';\nimport pkg from 'pg';\nconst { Client } = pkg;\n\nconst supabaseUrl = 'https://qducbqhuwqdyqioqevle.supabase.co';\nconst supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFkdWNicWh1d3FkeXFpb3FldmxlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5NDM3NjgsImV4cCI6MjA4NDUxOTc2OH0.hzOmMJcRGFPShGLRecDruzOr8_W3kwdtykI2NJpyOXE';\nconst supabase = createClient\\(supabaseUrl, supabaseKey\\);\n\nconst dockerClient = new Client\\({\n  host: 'localhost',\n  port: 5432,\n  database: 'nfc_admin',\n  user: 'nfc',\n  password: 'nfc_password_change_me'\n}\\);\n\nasync function syncPosts\\(\\) {\n  console.log\\('üîÑ Sincronizando posts do Supabase para Docker PostgreSQL...\\\\n'\\);\n  \n  try {\n    await dockerClient.connect\\(\\);\n    console.log\\('‚úÖ Conectado ao Docker PostgreSQL\\\\n'\\);\n\n    // Arenas para sincronizar\n    const arenas = [\n      { slug: 'protocolo-lipedema', name: 'Protocolo Lipedema' },\n      { slug: 'sinal-vermelho', name: 'Sinal Vermelho' }\n    ];\n\n    for \\(const arena of arenas\\) {\n      console.log\\(`üìå Processando: ${arena.name}`\\);\n\n      // 1. Buscar arena no Docker\n      const arenaRes = await dockerClient.query\\(\n        'SELECT id FROM \"Arena\" WHERE slug = $1',\n        [arena.slug]\n      \\);\n\n      if \\(arenaRes.rows.length === 0\\) {\n        console.log\\(`   ‚ö†Ô∏è  Arena n√£o encontrada no Docker`\\);\n        continue;\n      }\n\n      const arenaId = arenaRes.rows[0].id;\n\n      // 2. Deletar posts antigos\n      const deleteRes = await dockerClient.query\\(\n        'DELETE FROM \"Post\" WHERE \"arenaId\" = $1',\n        [arenaId]\n      \\);\n      console.log\\(`   üóëÔ∏è  ${deleteRes.rowCount} posts antigos deletados`\\);\n\n      // 3. Buscar posts novos do Supabase\n      const { data: supabasePosts } = await supabase\n        .from\\('Post'\\)\n        .select\\('*'\\)\n        .eq\\('arenaId', arenaId\\)\n        .order\\('createdAt'\\);\n\n      if \\(!supabasePosts || supabasePosts.length === 0\\) {\n        console.log\\(`   ‚ö†Ô∏è  Nenhum post encontrado no Supabase`\\);\n        continue;\n      }\n\n      console.log\\(`   üì• Encontrados ${supabasePosts.length} posts no Supabase`\\);\n\n      // 4. Inserir posts novos no Docker\n      for \\(const post of supabasePosts\\) {\n        const createdAt = post.createdAt || new Date\\(\\).toISOString\\(\\);\n        \n        await dockerClient.query\\(\n          `INSERT INTO \"Post\" \\(id, content, \"arenaId\", \"userId\", \"isAIResponse\", \"isPublished\", \"isApproved\", \"createdAt\"\\)\n           VALUES \\($1, $2, $3, $4, $5, $6, $7, $8\\)`,\n          [post.id, post.content, arenaId, post.userId, post.isAIResponse, post.isPublished, post.isApproved, createdAt]\n        \\);\n      }\n\n      console.log\\(`   ‚úÖ ${supabasePosts.length} posts inseridos\\\\n`\\);\n    }\n\n    console.log\\('‚ïê'.repeat\\(60\\)\\);\n    console.log\\('‚úÖ SINCRONIZA√á√ÉO COMPLETA!'\\);\n    console.log\\('‚ïê'.repeat\\(60\\)\\);\n\n  } catch \\(error\\) {\n    console.error\\('‚ùå ERRO:', error.message\\);\n  } finally {\n    await dockerClient.end\\(\\);\n  }\n}\n\nsyncPosts\\(\\);\nEOF)",
      "Bash(/tmp/sync-docker-internal.sh << 'EOF'\n#!/bin/bash\ndocker exec nfc-postgres psql -U nfc -d nfc_admin << 'EOSQL'\n-- Deletar posts das arenas\nDELETE FROM \"Post\" WHERE \"arenaId\" IN \\(\n  SELECT id FROM \"Arena\" WHERE slug IN \\('protocolo-lipedema', 'sinal-vermelho'\\)\n\\);\n\n-- Verificar resultado\nSELECT COUNT\\(*\\), 'Posts deletados' as status FROM \"Post\" WHERE \"arenaId\" IN \\(\n  SELECT id FROM \"Arena\" WHERE slug IN \\('protocolo-lipedema', 'sinal-vermelho'\\)\n\\);\nEOSQL\nEOF)",
      "Bash(bash:*)",
      "Bash(DATABASE_URL=\"postgresql://nfc:nfc_password_change_me@localhost:5432/nfc_admin\" npx prisma migrate deploy:*)",
      "Bash(DATABASE_URL=\"postgresql://nfc:nfc_password_change_me@localhost:5432/nfc_admin\" DIRECT_URL=\"postgresql://nfc:nfc_password_change_me@localhost:5432/nfc_admin\" npx prisma migrate deploy:*)",
      "Bash(DATABASE_URL=\"postgresql://nfc@localhost:5432/nfc_admin\" DIRECT_URL=\"postgresql://nfc@localhost:5432/nfc_admin\" npx prisma migrate:*)",
      "Bash(/tmp/setup-docker-db.sql << 'EOF'\n-- Criar extens√µes\nCREATE EXTENSION IF NOT EXISTS \"uuid-ossp\";\nCREATE EXTENSION IF NOT EXISTS \"pgcrypto\";\n\n-- Tabela Arena\nCREATE TABLE IF NOT EXISTS \"Arena\" \\(\n  id UUID PRIMARY KEY DEFAULT uuid_generate_v4\\(\\),\n  name VARCHAR\\(255\\) NOT NULL,\n  slug VARCHAR\\(255\\) UNIQUE NOT NULL,\n  description TEXT,\n  icon VARCHAR\\(50\\),\n  color VARCHAR\\(255\\),\n  category VARCHAR\\(100\\),\n  isActive BOOLEAN DEFAULT true,\n  isPaused BOOLEAN DEFAULT false,\n  allowImages BOOLEAN DEFAULT true,\n  allowLinks BOOLEAN DEFAULT true,\n  allowVideos BOOLEAN DEFAULT false,\n  aiPersona VARCHAR\\(50\\) DEFAULT 'BALANCED',\n  aiInterventionRate INT DEFAULT 50,\n  aiFrustrationThreshold INT DEFAULT 120,\n  aiCooldown INT DEFAULT 5,\n  arenaType VARCHAR\\(50\\) DEFAULT 'GENERAL',\n  parentArenaSlug VARCHAR\\(255\\),\n  requiresFP INT,\n  requiresSubscription BOOLEAN DEFAULT false,\n  movementCategory VARCHAR\\(100\\),\n  movementPattern VARCHAR\\(100\\),\n  categoria VARCHAR\\(100\\),\n  criadaPor VARCHAR\\(50\\),\n  createdByUserId UUID,\n  totalPosts INT DEFAULT 0,\n  totalComments INT DEFAULT 0,\n  dailyActiveUsers INT DEFAULT 0,\n  status VARCHAR\\(50\\) DEFAULT 'COLD',\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n\\);\n\n-- Tabela User\nCREATE TABLE IF NOT EXISTS \"User\" \\(\n  id VARCHAR\\(255\\) PRIMARY KEY,\n  email VARCHAR\\(255\\) UNIQUE,\n  name VARCHAR\\(255\\),\n  role VARCHAR\\(50\\) DEFAULT 'USER',\n  is_ghost_user BOOLEAN DEFAULT false,\n  fpTotal INT DEFAULT 0,\n  fpAvailable INT DEFAULT 0,\n  currentStreak INT DEFAULT 0,\n  longestStreak INT DEFAULT 0,\n  isMuted BOOLEAN DEFAULT false,\n  isBanned BOOLEAN DEFAULT false,\n  spamScore INT DEFAULT 0,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n\\);\n\n-- Tabela Post\nCREATE TABLE IF NOT EXISTS \"Post\" \\(\n  id UUID PRIMARY KEY DEFAULT uuid_generate_v4\\(\\),\n  content TEXT NOT NULL,\n  \"arenaId\" UUID NOT NULL REFERENCES \"Arena\"\\(id\\) ON DELETE CASCADE,\n  \"userId\" VARCHAR\\(255\\) NOT NULL REFERENCES \"User\"\\(id\\),\n  \"isAIResponse\" BOOLEAN DEFAULT false,\n  \"isPublished\" BOOLEAN DEFAULT true,\n  \"isApproved\" BOOLEAN DEFAULT true,\n  \"createdAt\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  \"updatedAt\" TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n\\);\n\n-- √çndices\nCREATE INDEX IF NOT EXISTS idx_post_arena ON \"Post\"\\(\"arenaId\"\\);\nCREATE INDEX IF NOT EXISTS idx_post_user ON \"Post\"\\(\"userId\"\\);\nCREATE INDEX IF NOT EXISTS idx_arena_slug ON \"Arena\"\\(slug\\);\n\nEOF)",
      "Bash(/tmp/reset-supabase.mjs << 'EOF'\nimport { createClient } from '@supabase/supabase-js';\n\nconst supabase = createClient\\(\n  'https://qducbqhuwqdyqioqevle.supabase.co',\n  'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFkdWNicWh1d3FkeXFpb3FldmxlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5NDM3NjgsImV4cCI6MjA4NDUxOTc2OH0.hzOmMJcRGFPShGLRecDruzOr8_W3kwdtykI2NJpyOXE'\n\\);\n\nasync function main\\(\\) {\n  console.log\\('üóëÔ∏è  LIMPANDO Supabase...\\\\n'\\);\n\n  // 1. Buscar arenas alvo\n  const { data: arenas } = await supabase\n    .from\\('Arena'\\)\n    .select\\('id, slug'\\)\n    .in\\('slug', ['protocolo-lipedema', 'sinal-vermelho']\\);\n\n  const arenaIds = arenas?.map\\(a => a.id\\) || [];\n  console.log\\(`üìå Arenas encontradas: ${arenaIds.length}`\\);\n\n  // 2. Deletar TODOS posts dessas arenas\n  if \\(arenaIds.length > 0\\) {\n    const { data: oldPosts, error: selectError } = await supabase\n      .from\\('Post'\\)\n      .select\\('id'\\)\n      .in\\('arenaId', arenaIds\\);\n\n    if \\(oldPosts && oldPosts.length > 0\\) {\n      const { error: deleteError } = await supabase\n        .from\\('Post'\\)\n        .delete\\(\\)\n        .in\\('arenaId', arenaIds\\);\n\n      if \\(deleteError\\) {\n        console.log\\(`‚ùå Erro ao deletar: ${deleteError.message}`\\);\n      } else {\n        console.log\\(`üóëÔ∏è  ${oldPosts.length} posts antigos deletados\\\\n`\\);\n      }\n    }\n  }\n\n  // 3. Contar posts restantes\n  const { count: postCount } = await supabase\n    .from\\('Post'\\)\n    .select\\('*', { count: 'exact' }\\)\n    .in\\('arenaId', arenaIds\\);\n\n  console.log\\(`‚úÖ Posts restantes: ${postCount}`\\);\n  console.log\\('‚úÖ Supabase limpo! Pronto para inserir novos dados.\\\\n'\\);\n}\n\nmain\\(\\).catch\\(console.error\\);\nEOF)",
      "Bash(/tmp/copy-docker-to-supabase.mjs << 'EOF'\nimport { createClient } from '@supabase/supabase-js';\nimport { execSync } from 'child_process';\n\nconst supabase = createClient\\(\n  'https://qducbqhuwqdyqioqevle.supabase.co',\n  'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFkdWNicWh1d3FkeXFpb3FldmxlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5NDM3NjgsImV4cCI6MjA4NDUxOTc2OH0.hzOmMJcRGFPShGLRecDruzOr8_W3kwdtykI2NJpyOXE'\n\\);\n\nasync function main\\(\\) {\n  console.log\\('üì• Copiando posts do Docker ‚Üí Supabase\\\\n'\\);\n\n  // 1. Buscar posts do Docker\n  const cmd = `docker exec -i nfc-postgres psql -U nfc -d nfc_admin -c \"SELECT id, content, \\\\\\\\\\\\\"arenaId\\\\\\\\\\\\\", \\\\\\\\\\\\\"userId\\\\\\\\\\\\\", \\\\\\\\\\\\\"isAIResponse\\\\\\\\\\\\\", \\\\\\\\\\\\\"isPublished\\\\\\\\\\\\\", \\\\\\\\\\\\\"isApproved\\\\\\\\\\\\\", \\\\\\\\\\\\\"createdAt\\\\\\\\\\\\\", \\\\\\\\\\\\\"updatedAt\\\\\\\\\\\\\" FROM \\\\\\\\\\\\\"Post\\\\\\\\\\\\\" ORDER BY \\\\\\\\\\\\\"createdAt\\\\\\\\\\\\\";\"`\n\n  const result = execSync\\(cmd, { encoding: 'utf-8' }\\);\n  const lines = result.split\\('\\\\n'\\).filter\\(l => l.trim\\(\\) && !l.includes\\('id | content'\\)\\);\n\n  console.log\\(`üìä Posts no Docker: ${lines.length}\\\\n`\\);\n\n  // 2. Parse e copiar para Supabase\n  let insertedCount = 0;\n  const posts = [];\n\n  for \\(const line of lines\\) {\n    const parts = line.split\\('|'\\).map\\(p => p.trim\\(\\)\\);\n    if \\(parts.length >= 9\\) {\n      posts.push\\({\n        id: parts[0],\n        content: parts[1],\n        arenaId: parts[2],\n        userId: parts[3],\n        isAIResponse: parts[4] === 't',\n        isPublished: parts[5] === 't',\n        isApproved: parts[6] === 't',\n        createdAt: parts[7],\n        updatedAt: parts[8]\n      }\\);\n    }\n  }\n\n  console.log\\(`‚úÖ Parsed ${posts.length} posts\\\\n`\\);\n\n  // 3. Inserir no Supabase\n  for \\(const post of posts\\) {\n    const { error } = await supabase.from\\('Post'\\).insert\\([post]\\);\n    if \\(!error\\) insertedCount++;\n  }\n\n  console.log\\(`üì• ${insertedCount} posts inseridos no Supabase\\\\n`\\);\n\n  // 4. Atualizar totalPosts nas arenas\n  const { data: arenas } = await supabase\n    .from\\('Arena'\\)\n    .select\\('id, slug'\\)\n    .in\\('slug', ['protocolo-lipedema', 'sinal-vermelho']\\);\n\n  for \\(const arena of arenas || []\\) {\n    const { count } = await supabase\n      .from\\('Post'\\)\n      .select\\('*', { count: 'exact' }\\)\n      .eq\\('arenaId', arena.id\\);\n\n    await supabase\n      .from\\('Arena'\\)\n      .update\\({ totalPosts: count || 0 }\\)\n      .eq\\('id', arena.id\\);\n\n    console.log\\(`‚úÖ ${arena.slug}: ${count} posts`\\);\n  }\n}\n\nmain\\(\\).catch\\(console.error\\);\nEOF)",
      "Bash(/tmp/insert-sinal-vermelho-final.mjs << 'EOF'\nimport { createClient } from '@supabase/supabase-js';\nimport { execSync } from 'child_process';\n\nconst supabase = createClient\\(\n  'https://qducbqhuwqdyqioqevle.supabase.co',\n  'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFkdWNicWh1d3FkeXFpb3FldmxlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5NDM3NjgsImV4cCI6MjA4NDUxOTc2OH0.hzOmMJcRGFPShGLRecDruzOr8_W3kwdtykI2NJpyOXE'\n\\);\n\nasync function main\\(\\) {\n  console.log\\('üì• Inserindo 43 posts Sinal Vermelho no Supabase\\\\n'\\);\n\n  // 1. Buscar posts do Docker \\(arena-sinal-vermelho\\)\n  const cmd = `docker exec -i nfc-postgres psql -U nfc -d nfc_admin -c \"SELECT id, content, \\\\\\\\\\\\\"userId\\\\\\\\\\\\\", \\\\\\\\\\\\\"isAIResponse\\\\\\\\\\\\\", \\\\\\\\\\\\\"isPublished\\\\\\\\\\\\\", \\\\\\\\\\\\\"isApproved\\\\\\\\\\\\\", \\\\\\\\\\\\\"createdAt\\\\\\\\\\\\\" FROM \\\\\\\\\\\\\"Post\\\\\\\\\\\\\" WHERE \\\\\\\\\\\\\"arenaId\\\\\\\\\\\\\" = '550e8400-e29b-41d4-a716-446655440000' ORDER BY \\\\\\\\\\\\\"createdAt\\\\\\\\\\\\\";\"`;\n\n  const result = execSync\\(cmd, { encoding: 'utf-8' }\\);\n  const lines = result.split\\('\\\\n'\\).filter\\(l => l.trim\\(\\) && !l.includes\\('id | content'\\)\\);\n\n  console.log\\(`üìä Posts encontrados: ${lines.length}\\\\n`\\);\n\n  // 2. Inserir no Supabase com arenaId correto\n  let insertedCount = 0;\n  const arenaId = 'arena-sinal-vermelho';\n\n  for \\(const line of lines\\) {\n    const parts = line.split\\('|'\\).map\\(p => p.trim\\(\\)\\);\n    if \\(parts.length >= 7\\) {\n      const post = {\n        id: parts[0],\n        content: parts[1],\n        arenaId: arenaId,\n        userId: parts[2],\n        isAIResponse: parts[3] === 't',\n        isPublished: parts[4] === 't',\n        isApproved: parts[5] === 't',\n        createdAt: parts[6]\n      };\n\n      const { error } = await supabase.from\\('Post'\\).insert\\([post]\\);\n      if \\(!error\\) insertedCount++;\n    }\n  }\n\n  console.log\\(`‚úÖ ${insertedCount} posts inseridos!\\\\n`\\);\n\n  // 3. Atualizar totalPosts\n  const { count } = await supabase\n    .from\\('Post'\\)\n    .select\\('*', { count: 'exact' }\\)\n    .eq\\('arenaId', arenaId\\);\n\n  await supabase\n    .from\\('Arena'\\)\n    .update\\({ totalPosts: count || 0 }\\)\n    .eq\\('id', arenaId\\);\n\n  console.log\\(`üìä Sinal Vermelho: ${count} posts`\\);\n}\n\nmain\\(\\).catch\\(console.error\\);\nEOF)",
      "Bash(python3:*)",
      "Bash(1 grep -o 'knee_valgus.*is_safety_critical.*,' /tmp/result.json)"
    ]
  }
}
